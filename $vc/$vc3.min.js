var $vc={};$vc.fn={};$vc.sessionState={};$vc.startState={};$vc.customerState={};$vc.memberState={};$vc.catalogueState={};$vc.profileState={};$vc.langState={};$vc.initialized=!1;$vc.fn=function(){var n=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0},t=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},i=function(n){$vc.fn.console("extract profile from all profiles");$vc.profileState=$vc.profileState===undefined?n.vubz:n[$vc.sessionState.profile];$vc.sessionState.lang=$vc.sessionState.lang.length===2?$vc.sessionState.lang:$vc.profileState.lang;$vc.sessionState.lang==="fr"&&$vc.profileState.langFr==="n"&&(alert("This app is not avilable in French;"),$vc.sessionState.lang=$vc.profileState.lang);$vc.sessionState.lang==="es"&&$vc.profileState.langEs==="n"&&(alert("This app is not avilable in Spanish;"),$vc.sessionState.lang=$vc.profileState.lang);$vc.sessionState.lang==="pt"&&$vc.profileState.langPt==="n"&&(alert("This app is not avilable in Portuguese;"),$vc.sessionState.lang=$vc.profileState.lang);var t=0;$vc.profileState.langEn==="y"&&t++;$vc.profileState.langFr==="y"&&t++;$vc.profileState.langEs==="y"&&t++;$vc.profileState.langPt==="y"&&t++;t>1&&($(".langButton").removeClass("langButtonShadow"),$vc.profileState.langEn==="y"&&$(".langButton_en").show(),$vc.profileState.langFr==="y"&&$(".langButton_fr").show(),$vc.profileState.langEs==="y"&&$(".langButton_es").show(),$vc.profileState.langPt==="y"&&$(".langButton_pt").show(),$(".langButton_"+$vc.sessionState.lang).addClass("langButtonShadow"),$(".langButtons").show())},r=function(){alert("Oops... something went wrong here retrieving the profiles")};return{startData:function(){var n=$("#startState")[0].innerHTML.split("|");$vc.startState.appId=n[0];$vc.startState.custAcctId=n[1];$vc.startState.custGuid=n[2];$vc.startState.custId=n[3];$vc.startState.debug=n[4]==="y"?!0:!1;$vc.startState.host=n[5];$vc.startState.hostProfile=n[6];$vc.startState.lang=n[7];$vc.startState.membEmail=n[8];$vc.startState.membFirstName=n[9];$vc.startState.membGuid=n[10];$vc.startState.membId=n[11];$vc.startState.membLastName=n[12];$vc.startState.membNo=n[13];$vc.startState.profile=n[14];$vc.sessionState.appId=n[0];$vc.sessionState.custGuid=n[2];$vc.sessionState.custId=n[3];$vc.sessionState.lang=n[7];$vc.sessionState.membGuid=n[10];$vc.sessionState.membId=n[11];$vc.sessionState.profile=$vc.startState.profile.length>0?$vc.startState.profile:$vc.startState.hostProfile},initData:function(n){$.localStorage(n)===null&&$.localStorage(n,"{}")},getData:function(n){$vc.sessionState=$.parseJSON($.localStorage(n))},putData:function(){$vc.fn.console("storing local data for "+$vc.appId);$.localStorage($vc.appId,JSON.stringify($vc.sessionState))},endData:function(){var n=$.localStorage();n.clear()},deviceCheck:function(){$vc.startState.deviceWidth=n();$vc.startState.deviceHeight=t();$vc.startState.deviceClass=$vc.startState.deviceWidth>1024?"desktop":$vc.startState.deviceWidth<600?"phone":"tablet";$vc.startState.debug&&$("body").addClass("ui-mini")},parseError:function(n){var t;return t=JSON.parse(n),t=t.message,t=JSON.stringify(t),t=t.replace('"',""),t.replace('"',"")},popup:function(n,t){n=n.replace(/,/g,", ");$("#globalPopupText").html(n);isTrue(t)?$("#globalPopupClose").hide():$("#globalPopupClose").show();$("#globalPopup").popup("open")},console:function(n){$vc.fn.console(n)},profiles:function(n){n.length>0?($vc.fn.console("getting profiles"),$vc.sessionState.profile=n,$vc.sessionState.debug=!0,$ws.profiles($vc.sessionState,i,r)):($vc.fn.console("no profiles used"),$vc.sessionState.lang="en")}}}();$(document).on("pagebeforecreate",function(){$vc.initialized||($vc.initialized=!0,$.ajaxSetup({cache:!1}),$("#globalPopup").enhanceWithin().popup(),$vc.appId=$("#startState")[0].innerHTML.split("|")[0],$vc.fn.initData($vc.appId),$vc.fn.getData($vc.appId),$vc.fn.startData(),$vc.fn.deviceCheck(),$vc.fn.profiles($vc.startState.profile),$vc.sessionState.prevPage="",$vc.sessionState.currPage="",$vc.fn.putData())});$(document).on("pagebeforeshow",function(){$vc.fn.console($.mobile.activePage[0].id);var n=$(":mobile-pagecontainer").pagecontainer("getActivePage").prop("id");n!==$vc.sessionState.currPage&&($vc.sessionState.prevPage=$vc.sessionState.currPage,$vc.sessionState.currPage=n,$vc.fn.putData())});$(function(){$(window).resize(function(){var n;clearTimeout(n);n=setTimeout($vc.fn.deviceCheck,50)});$(document).on("pageload",function(){$("textarea[maxlength]").keyup(function(){var n=parseInt($(this).attr("maxlength"));$(this).val().length>n&&$(this).val($(this).val().substr(0,$(this).attr("maxlength")))})});$(".help-popup").on("click",function(){$(this).popup("close")});$(".sessionState").on("click",function(){if($vc.startState.debug){var n="Session Objects:<br /><br />session:<br />"+JSON.stringify($vc.sessionState)+"<br /><br />";JSON.stringify($vc.startState)!=="{}"&&(n+="start:<br />"+JSON.stringify($vc.startState)+"<br /><br />");JSON.stringify($vc.customerState)!=="{}"&&(n+="customer:<br />"+JSON.stringify($vc.customerState)+"<br /><br />");JSON.stringify($vc.memberState)!=="{}"&&(n+="member:<br />"+JSON.stringify($vc.memberState)+"<br /><br />");JSON.stringify($vc.catalogueState)!=="{}"&&(n+="catalogue:<br />"+JSON.stringify($vc.catalogueState)+"<br /><br />");JSON.stringify($vc.profileState)!=="{}"&&(n+="profile:<br />"+JSON.stringify($vc.profileState)+"<br /><br />");JSON.stringify($vc.langState)!=="{}"&&(n+="lang:<br />"+JSON.stringify($vc.langState)+"<br /><br />");$vc.fn.popup(n)}});$(".backIcon").on("click",function(){$(":mobile-pagecontainer").pagecontainer("change","#"+$vc.sessionState.prevPage)})});$vc.ws=function(n,t,i,r){var u=$.ajax({dataType:"json",url:"/vubizWS/v8client.asmx/"+n,data:t});u.done(function(n){i(n)});u.fail(function(n,t){r(n,t)})};